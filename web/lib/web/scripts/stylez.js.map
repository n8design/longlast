{"version":3,"sources":["web/scripts/stylez.js"],"names":["_CONSTANTS","require","SessionStorage","Events","Stylez","window","addEventListener","detectStorageChange","CONSTANTS","btnsCatFilter","document","querySelectorAll","dmAtomicFilter","forEach","btn","filterCategories","btnDeviceSelector","dmDeviceTypes","filterDeviceType","setWidth","btnTocs","querySelector","dmFilterTocs","toggleTocs","btnPagers","pagers","pager","changeIndex","setCurrentFilter","renderToc","url","fetch","then","response","status","json","catch","error","console","toc","pattern","_fetchPattern","patternString","data","patternItems","patterns","categories","Set","map","item","category","categoryStats","Object","cateogryStat","undefined","title","tocOutput","innerHTML","setTocFilter","ui"],"mappings":"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","sourcesContent":["const _CONSTANTS = require('./stylez.constants');\nconst SessionStorage = require('./stylez.storage');\nconst Events = require('./stylez.events');\n// const Data = require('./styles.data');\n\nexport class Stylez {\n\n    constructor() {\n\n        window.addEventListener('storage', Events.detectStorageChange)\n\n        // init internamels\n        this.CONSTANTS = _CONSTANTS;\n        this.Events = Events;\n\n        // register category filters\n        this.btnsCatFilter = document.querySelectorAll(this.CONSTANTS.dmAtomicFilter);\n        this.btnsCatFilter.forEach((btn) => {\n            btn.addEventListener('click', Events.filterCategories);\n        });\n\n        // register device types\n        this.btnDeviceSelector = document.querySelectorAll(this.CONSTANTS.dmDeviceTypes);\n        this.btnDeviceSelector.forEach((btn) => {\n            btn.addEventListener('click', Events.filterDeviceType);\n        });\n\n        window.addEventListener('resize', Events.setWidth);\n        // set the initial width\n        Events.setWidth(null);\n\n        this.btnTocs = document.querySelector(this.CONSTANTS.dmFilterTocs);\n        if (this.btnTocs !== null && this.btnTocs !== null) {\n\n            this.btnTocs.addEventListener('click', Events.toggleTocs);\n\n        }\n\n        this.btnPagers = document.querySelectorAll(this.CONSTANTS.pagers);\n        this.btnPagers.forEach(pager => {\n\n            pager.addEventListener('click', Events.changeIndex)\n\n        });\n\n        SessionStorage.setCurrentFilter();\n\n        // force slider to show or not\n        Events.detectStorageChange(null);\n\n        this.renderToc();\n\n    }\n\n    async _fetchPattern() {\n\n        let url = './app/config/stylez.json';\n\n        return await fetch(url)\n            .then((response) => {\n\n                if (response.status === 200) {\n\n                    return response.json();\n\n                } else {\n\n                    throw 'Error current status: ' + response.status + ' - ' + url;\n\n                }\n\n            })\n            .catch(error => {\n\n                console.error('ERROR :::', error);\n\n            })\n\n    }\n\n\n    renderToc() {\n\n        const toc = document.querySelector('.o-tocsinner');\n\n        let pattern = this._fetchPattern();\n\n        let patternString = {};\n\n        pattern.then((data) => {\n\n            let patternItems = data.patterns;\n\n            // create unique values first\n            let categories = [...new Set(patternItems.map(item => item.category))];\n            // create statistics object\n            let categoryStats = new Object();\n            categories.forEach(item => {\n                // create properties\n                categoryStats[item] = 0;\n            })\n\n            let cateogryStat = {\n\n            }\n\n            data.patterns.forEach(item => {\n\n                if (patternString[item.category] === undefined) {\n                    patternString[item.category] = '';\n                }\n\n                patternString[item.category] += `<li><button \n                data-filter='${item.category}' \n                data-index='${categoryStats[item.category]}' \n                class='a-toc-toggle'>${item.title}</button></li>`;\n\n                categoryStats[item.category] += 1;\n\n            });\n\n            let tocOutput =\n                `<ul><li><h2>Atoms</h2><ol>${patternString['atoms'] }</ol></li></ul>\n            <ul><li><h2>Molecules</h2><ol>${patternString['molecules'] }</ol></li></ul>\n            <ul><li><h2>Organism</h2><ol>${patternString['organism'] }</ol></li></ul>\n            <ul><li><h2>Templates</h2><ol>${patternString['templates'] }</ol></li></ul>\n            <ul><li><h2>Pages</h2><ol>${patternString['pages'] }</ol></li></ul>`;\n\n            toc.innerHTML = tocOutput;\n\n            document.querySelectorAll('.a-toc-toggle').forEach(item => {\n                item.addEventListener('click', this.Events.setTocFilter);\n            })\n\n            // Apply filter\n\n\n        });\n\n\n\n    }\n\n}\n\nconst ui = new Stylez;"],"file":"stylez.js"}