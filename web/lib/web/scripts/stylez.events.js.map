{"version":3,"sources":["web/scripts/stylez.events.js"],"names":["CONSTANTS","require","SessionStorage","Events","iframe","document","querySelector","viewerFrame","contentWindow","location","href","btnList","curButton","forEach","btn","classList","add","remove","updateStatus","event","target","dataset","filter","indexOf","detectUserClick","curSession","getCurrentFilter","category","index","maxIndex","console","log","allButtons","querySelectorAll","dmAtomicFilter","_toggleButtons","_updateIframeContent","dmDeviceTypes","newWidth","size","style","maxWidth","setTimeout","curWidth","undefined","value","window","innerWidth","curHeight","innerHeight","tocs","toggle","preventDefault","curIndex","curFilter","parseInt","length","activeButton","detectStorageChange","curItem","currentSession","title","currentPatternTitle","textContent","itemSlider","setAttribute","screenX","screenY","module","exports"],"mappings":"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","sourcesContent":["const CONSTANTS = require('./stylez.constants');\nconst SessionStorage = require('./stylez.storage');\n\nclass Events {\n\n    static _updateIframeContent() {\n\n        let iframe = document.querySelector(CONSTANTS.viewerFrame);\n        iframe.contentWindow.location.href = \"viewer.html\"\n\n    }\n\n    static _toggleButtons(btnList, curButton) {\n\n        btnList.forEach((btn) => {\n\n            if (btn === curButton) {\n\n                btn.classList.add('selected');\n\n            } else {\n\n                btn.classList.remove('selected');\n\n            }\n\n        });\n\n        // updateing Session Status\n        SessionStorage.updateStatus();\n\n    }\n\n    // Handle Category selection\n    static filterCategories(event) {\n\n        if (event.target.dataset !== null &&\n            event.target.dataset.filter !== null &&\n            ([\"atoms\", \"molecules\", \"organism\"].indexOf(event.target.dataset.filter) !== -1),\n            Events.detectUserClick(event)) {\n\n            let curSession = SessionStorage.getCurrentFilter();\n\n            curSession.category = event.target.dataset.filter;\n            curSession.index = null\n            curSession.maxIndex = null\n\n            SessionStorage.updateStatus(curSession);\n\n            console.log(\"WELLLLLLL:::::::\", event.target.dataset.filter);\n\n        }\n\n        let curButton = event.target,\n            allButtons = document.querySelectorAll(CONSTANTS.dmAtomicFilter);\n\n        Events._toggleButtons(allButtons, curButton);\n\n        Events._updateIframeContent();\n    }\n\n    // Handle deviceFiltering\n    static filterDeviceType(event) {\n\n        let curButton = event.target,\n            allButtons = document.querySelectorAll(CONSTANTS.dmDeviceTypes),\n            viewerFrame = document.querySelector(CONSTANTS.viewerFrame);\n\n        Events._toggleButtons(allButtons, curButton);\n\n        // Check for update the full width\n        const newWidth = curButton.dataset.size !== 'full' ? curButton.dataset.size : -1;\n\n        // if width !== full set precicse pixels\n        if (newWidth !== -1) {\n\n            viewerFrame.style.maxWidth = `${newWidth}px`;\n\n        } else {\n\n            // unset and rest to 100vw;\n            viewerFrame.style.maxWidth = \"100vw\";\n\n        }\n\n    }\n\n    static setWidth(event) {\n\n        // Timeout to make sure resize is finished\n        setTimeout(() => {\n\n            let curWidth = document.querySelector(CONSTANTS.curWidth);\n\n            if (curWidth !== null && curWidth !== undefined) {\n                curWidth.value = window.innerWidth;\n            }\n\n            let curHeight = document.querySelector(CONSTANTS.curHeight);\n\n            if (curHeight !== null && curHeight !== undefined) {\n                curHeight.value = window.innerHeight;\n            }\n\n        }, 250);\n\n    }\n\n    static toggleTocs(event) {\n\n        let tocs = document.querySelector(CONSTANTS.tocs);\n\n        tocs.classList.toggle('active');\n\n    }\n\n    static setTocFilter(event) {\n\n        event.preventDefault();\n        let curButton = event.target,\n            curIndex = curButton.dataset.index,\n            curFilter = curButton.dataset.filter;\n\n        let curSession = SessionStorage.getCurrentFilter();\n        curSession.category = curFilter;\n        curSession.index = parseInt(curIndex);\n        curSession.maxIndex = document.querySelectorAll(`button.a-toc-toggle[data-filter='${curFilter}']`).length;\n\n        SessionStorage.updateStatus(curSession);\n\n        document.querySelector('.o-tocs').classList.remove('active');\n\n        let activeButton = document.querySelector(`button.a-filter[data-filter='${curFilter}']`);\n        let allButtons = document.querySelectorAll(`button.a-filter`);\n\n        Events._toggleButtons(allButtons, activeButton);\n\n        // force the Storage Change to show slider if required\n        Events.detectStorageChange(null);\n        Events._updateIframeContent();\n\n    }\n\n    /**\n     * Change Index of current element\n     * @param {event} event \n     */\n    static changeIndex(event) {\n\n        let curItem = event.target;\n\n        if (curItem.dataset !== undefined &&\n            curItem.dataset.filter !== undefined) {\n\n            let curSession = SessionStorage.getCurrentFilter();\n\n            if (curItem.dataset.filter === 'next-item') {\n\n                if (curSession.index + 1 < curSession.maxIndex) {\n\n                    curSession.index = curSession.index + 1;\n\n                } else {\n\n                    curSession.index = 0;\n\n                }\n\n                SessionStorage.updateStatus(curSession);\n                Events._updateIframeContent();\n\n            }\n\n            if (curItem.dataset.filter === 'prev-item') {\n\n                if (curSession.index - 1 >= 0) {\n\n                    curSession.index = curSession.index - 1;\n\n                } else {\n\n                    curSession.index = curSession.maxIndex;\n\n                }\n\n                SessionStorage.updateStatus(curSession);\n                Events._updateIframeContent();\n\n            }\n\n        }\n\n    }\n\n    /**\n     * Detecht Storage Changes\n     * @param {event} event \n     */\n    static detectStorageChange(event) {\n\n        let currentSession = SessionStorage.getCurrentFilter();\n\n        if (currentSession.title !== null &&\n            currentSession.maxIndex !== null &&\n            currentSession.maxIndex > 1) {\n\n            let currentPatternTitle = document.querySelector('.a-filtername');\n            currentPatternTitle.textContent = currentSession.title;\n\n            let itemSlider = document.querySelector('.m-itemslider');\n\n            if (itemSlider !== null) {\n\n                itemSlider.classList.remove('hidden');\n                itemSlider.classList.add('show');\n\n                itemSlider.setAttribute('aria-hidden', false);\n                itemSlider.setAttribute('aria-disabled', false);\n\n\n            }\n\n\n        } else {\n\n            let itemSlider = document.querySelector('.m-itemslider');\n\n            if (itemSlider !== null) {\n\n                itemSlider.classList.add('hidden');\n                itemSlider.classList.remove('show');\n\n                itemSlider.setAttribute('aria-hidden', true);\n                itemSlider.setAttribute('aria-disabled', true);\n\n            }\n        }\n\n    }\n\n    /**\n     * Checks if user clicked or click was executed by script\n     * @param {Event} event \n     */\n    static detectUserClick(event){\n        return event.screenX && event.screenX != 0 && event.screenY && event.screenY != 0\n    }\n\n}\n\nmodule.exports = Events;"],"file":"stylez.events.js"}