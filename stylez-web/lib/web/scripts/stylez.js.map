{"version":3,"sources":["web/scripts/stylez.js"],"names":["_CONSTANTS","dmAtomicFilter","dmDeviceTypes","dmFilterTocs","viewerFrame","tocs","curWidth","curHeight","Events","btnList","curButton","forEach","btn","classList","add","remove","SessionStorage","updateStatus","event","target","allButtons","document","querySelectorAll","_toggleButtons","iframe","querySelector","contentWindow","location","href","newWidth","dataset","size","style","maxWidth","setTimeout","undefined","value","window","innerWidth","innerHeight","toggle","category","deviceSize","curSelected","filter","updates","defaultSession","_returnDefault","stylezSession","sessionStorage","getItem","setItem","JSON","stringify","_getSelectedCategory","_getSelectedDeviceSize","newStatus","parse","curStatus","categoryFilter","click","deviceFilter","Stylez","CONSTANTS","btnsCatFilter","addEventListener","filterCategories","btnDeviceSelector","filterDeviceType","setWidth","btnTocs","toggleTocs","setCurrentFilter","ui"],"mappings":"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","sourcesContent":["'use strict';\n\nconst _CONSTANTS = {\n    dmAtomicFilter: '.m-filters .a-filter',\n    dmDeviceTypes: '.m-devicetypes .a-filter',\n    dmFilterTocs: '.m-filtertocs .a-filter',\n    viewerFrame: '.o-viewer',\n    tocs: '.o-tocs',\n    curWidth: '.a-input.js-curWidth',\n    curHeight: '.a-input.js-curHeight',\n}\n\nexport class Events {\n\n    static _toggleButtons(btnList, curButton) {\n\n        btnList.forEach((btn) => {\n\n            if (btn === curButton) {\n\n                btn.classList.add('selected');\n\n            } else {\n\n                btn.classList.remove('selected');\n\n            }\n\n        });\n\n        // updateing Session Status\n        SessionStorage.updateStatus();\n\n    }\n\n    // Handle Category selection\n    static filterCategories(event) {\n\n        let curButton = event.target,\n            allButtons = document.querySelectorAll(_CONSTANTS.dmAtomicFilter);\n\n        Events._toggleButtons(allButtons, curButton);\n\n        let iframe = document.querySelector(_CONSTANTS.viewerFrame);\n        iframe.contentWindow.location.href = \"viewer.html\"\n\n    }\n\n    // Handle deviceFiltering\n    static filterDeviceType(event) {\n\n        let curButton = event.target,\n            allButtons = document.querySelectorAll(_CONSTANTS.dmDeviceTypes),\n            viewerFrame = document.querySelector(_CONSTANTS.viewerFrame);\n\n        Events._toggleButtons(allButtons, curButton);\n\n        // Check for update the full width\n        const newWidth = curButton.dataset.size !== 'full' ? curButton.dataset.size : -1;\n\n        // if width !== full set precicse pixels\n        if (newWidth !== -1) {\n\n            viewerFrame.style.maxWidth = `${newWidth}px`;\n\n        } else {\n\n            // unset and rest to 100vw;\n            viewerFrame.style.maxWidth = \"100vw\";\n\n        }\n\n\n    }\n\n    static setWidth(event) {\n\n        // Timeout to make sure resize is finished\n        setTimeout(() => {\n\n            let curWidth = document.querySelector(_CONSTANTS.curWidth);\n\n            if (curWidth !== null && curWidth !== undefined) {\n                curWidth.value = window.innerWidth;\n            }\n\n            let curHeight = document.querySelector(_CONSTANTS.curHeight);\n\n            if (curHeight !== null && curHeight !== undefined) {\n                curHeight.value = window.innerHeight;\n            }\n\n        }, 250);\n\n    }\n\n    static toggleTocs(event) {\n\n        let tocs = document.querySelector(_CONSTANTS.tocs);\n\n        tocs.classList.toggle('active');\n\n    }\n\n}\n\nexport class SessionStorage {\n\n    static _returnDefault() {\n        return {\n            category: 'atoms',\n            deviceSize: 'full'\n        };\n    }\n\n    static _getSelectedCategory() {\n\n        let curSelected = document.querySelector(_CONSTANTS.dmAtomicFilter + '.selected');\n\n        if (curSelected !== null &&\n            curSelected.dataset !== null &&\n            curSelected.dataset.filter !== null) {\n\n            return curSelected.dataset.filter !== null ? curSelected.dataset.filter : 'atoms';\n\n        } else {\n\n            return 'atoms';\n\n        }\n\n    }\n\n    static _getSelectedDeviceSize() {\n\n        let curSelected = document.querySelector(_CONSTANTS.dmDeviceTypes + '.selected');\n\n        if (curSelected !== null &&\n            curSelected.dataset !== null &&\n            curSelected.dataset.size !== null) {\n\n            return curSelected.dataset.size !== null ? curSelected.dataset.size : 'full';;\n\n        } else {\n\n            return 'full';\n\n        }\n\n    }\n\n    static updateStatus(updates) {\n\n        let defaultSession = this._returnDefault();\n\n        let stylezSession = sessionStorage.getItem('stylez');\n\n        if (stylezSession === undefined ||\n            stylezSession === null) {\n\n            sessionStorage.setItem('stylez', JSON.stringify(defaultSession));\n\n            this._getSelectedCategory();\n            this._getSelectedDeviceSize();\n\n        } else {\n\n            let newStatus = JSON.parse(stylezSession);\n\n            newStatus.category = this._getSelectedCategory();\n            newStatus.deviceSize = this._getSelectedDeviceSize();\n\n            sessionStorage.setItem('stylez', JSON.stringify(newStatus));\n\n            this._getSelectedCategory();\n            this._getSelectedDeviceSize();\n\n        }\n\n    }\n\n    static setCurrentFilter() {\n\n\n        let curStatus = sessionStorage.getItem('stylez') !== null ?\n            JSON.parse(sessionStorage.getItem('stylez')) : SessionStorage._returnDefault();\n\n        let categoryFilter = document.querySelector(`button[data-filter=\"${curStatus.category}\"]`);\n        if (categoryFilter !== null && categoryFilter !== undefined) {\n            categoryFilter.classList.add('selected');\n            categoryFilter.click();\n        }\n\n        let deviceFilter = document.querySelector(`button[data-size=\"${curStatus.deviceSize}\"]`);\n        if (deviceFilter !== null && deviceFilter !== undefined) {\n            deviceFilter.classList.add('selected');\n            deviceFilter.click();\n        }\n\n    }\n\n    static getCurrentFilter() {\n\n        let curStatus = sessionStorage.getItem('stylez') !== null ?\n            JSON.parse(sessionStorage.getItem('stylez')) : SessionStorage._returnDefault();\n\n        return curStatus;\n\n    }\n\n}\n\nexport class Stylez {\n\n    constructor() {\n        // init internamels\n        this.CONSTANTS = _CONSTANTS;\n        this.Events = Events;\n\n        // register category filters\n        this.btnsCatFilter = document.querySelectorAll(this.CONSTANTS.dmAtomicFilter);\n        this.btnsCatFilter.forEach((btn) => {\n            btn.addEventListener('click', Events.filterCategories);\n        });\n\n        // register device types\n        this.btnDeviceSelector = document.querySelectorAll(this.CONSTANTS.dmDeviceTypes);\n        this.btnDeviceSelector.forEach((btn) => {\n            btn.addEventListener('click', Events.filterDeviceType);\n        });\n\n        window.addEventListener('resize', Events.setWidth);\n        // set the initial width\n        Events.setWidth(null);\n\n        this.btnTocs = document.querySelector(this.CONSTANTS.dmFilterTocs);\n        if (this.btnTocs !== null && this.btnTocs !== null) {\n\n            this.btnTocs.addEventListener('click', Events.toggleTocs);\n\n        }\n\n        SessionStorage.setCurrentFilter();\n\n    }\n\n}\n\nconst ui = new Stylez;"],"file":"stylez.js"}